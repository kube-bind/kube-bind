# Local development values for kube-bind backend
# This is a YAML-formatted file with common configuration for local development

# Image configuration
image:
  pullPolicy: IfNotPresent

# Backend configuration
backend:
  listenAddress: "0.0.0.0:8443"
  # OIDC configuration
  oidc:
    type: "external"
    issuerUrl: "https://auth.genericcontrolplane.io"
    clientId: "kube-bind"
    clientSecret: "### REPLACE_ME ###"
    callbackUrl: "https://kube-bind.genericcontrolplane.io/callback"
    # Example allowed groups and users for external OIDC
    allowedGroups:
      - "kube-bind-users"
      - "admins"
    allowedUsers:
      - "user@example.com"
  
  # Cookie encryption keys (generate your own for production!)
  # example: openssl rand -base64 32
  cookieSigningKey: "### REPLACE_ME ###"
  cookieEncryptionKey: "### REPLACE_ME ###"

  tls:
    enabled: true
    certSecretName: backend-tls-cert
    tlsCertFile: /etc/kube-bind/tls/tls.crt
    tlsKeyFile: /etc/kube-bind/tls/tls.key

# Cert-manager configuration
certManager:
  enabled: true
  clusterIssuer: letsencrypt-prod

# RBAC configuration
rbac:
  create: true

# Service account configuration
serviceAccount:
  create: true
  automount: true

service:
  type: LoadBalancer
  port: 8080
  httpsPort: 443

livenessProbe:
  httpGet:
    path: /healthz
    port: https
    scheme: HTTPS
readinessProbe:
  httpGet:
    path: /healthz
    port: https
    scheme: HTTPS